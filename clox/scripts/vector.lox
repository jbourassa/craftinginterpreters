fun vector(x, y) {
  fun api(what) {
    if (what == "x") {
      return x;
    }

    if (what == "y") {
      return y;
    }

    if (what == "add") {
      fun add(other) {
        return vector(x + other("x"), y + other("y"));
      }

      return add;
    }
  }

  return api;
}

var v1 = vector(1, 2);
var v2 = vector(1, 2);

var v3 = v1("add")(v2);
print v3("x");
print v3("y");
